<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/cadastro_ejs.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Document</title>
</head>
<style>
    .btn{
    background: linear-gradient(to right, #FFC2C2, #AED5FF); /* Gradiente de fundo */
    color: white; /* Cor do texto do botão */
    border: none; /* Remove a borda padrão */
    padding: 12px; /* Espaçamento interno do botão */
    border-radius: 5px; /* Bordas arredondadas do botão */
    cursor: pointer; /* Cursor de mão ao passar sobre o botão */
    width: 90%; /* Largura total do botão */
    margin-top: 10px; /* Margem superior para o botão */
    }
</style>
<body>
    <% if(successMessage.length) { %>
        <div id="flash-message" class="alert alert-success mx-4">
            <%= successMessage[0] %>
        </div>
        <% } else if(errorMessage.length) { %>
        <div id="flash-message" class="alert alert-danger mx-4">
            <%= errorMessage[0] %>
        </div>
        <% } %>
        
        
    <div class="form-container">
        <h2 class=" text-2xl font-bold p-4">Cadastre o tipo de camarão</h2>
        <hr class="gradient-hr mb-4">


        <form action="/camaroes/new" method="POST">
            <div class="form-group">
             
                <label for="autocomplete">Digite o Tipo do Camarão</label>
                <input type="text" id="autocomplete" name="nome">
            </div>
        
            <!-- Outros campos do formulário, como nome, descrição, etc. -->
            <button type="submit" class="btn btn-primary">Cadastrar</button>
        </form>
        

    </div>
    <img src="/imgs/camarize.png" class="w-48 mt-4" alt="">

    <script>
  $(document).ready(function() {
        // Função chamada sempre que o usuário digita no campo de autocomplete
        $('#autocomplete').on('input', function() {
            const query = $(this).val();

            // Se o campo estiver vazio, esconde as sugestões
            if (query.length === 0) {
                $('#autocomplete-results').empty().hide();
                return;
            }

            // Realiza a requisição AJAX para buscar os tipos de camarão
            $.ajax({
                url: '/search',  // Rota no servidor
                data: { query: query },  // Envia o termo que o usuário digitou
                type: 'GET',
                success: function(data) {
                    // Limpa as sugestões anteriores
                    $('#autocomplete-results').empty().show();

                    if (data.length > 0) {
                        // Se houver resultados, exibe as sugestões
                        data.forEach(function(item) {
                            $('#autocomplete-results').append(`<div class="suggestion-item">${item}</div>`);
                        });
                    } else {
                        // Se não houver resultados, exibe a opção para criar um novo tipo
                        $('#autocomplete-results').append('<div class="suggestion-item">Criar novo tipo de camarão</div>');
                    }
                },
                error: function() {
                    $('#autocomplete-results').empty().hide();  // Em caso de erro, esconde as sugestões
                }
            });
        });

        // Quando o usuário clica em uma sugestão
        $('#autocomplete-results').on('click', '.suggestion-item', function() {
            const selected = $(this).text();  // Pega o nome da sugestão
            $('#autocomplete').val(selected);  // Preenche o campo de autocomplete
            $('#autocomplete-results').empty().hide();  // Esconde as sugestões
        });
    });
    </script>

</body>
</html>

